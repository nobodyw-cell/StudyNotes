eddd计划就是一天看一章


# 1. 初识MySQL

## 1.1 MySQL的客户端/服务器架构

运行MySQL服务器的进程被称为MySQL数据库实例,简称数据库实例,进程名称默认为mysqld,客户端名称为mysql

 ## 1.2 客户端与服务器连接过程

 1. TCP/IP
    1. MySQL服务器启动时会默认申请3306端口号,在此等待客户端进程连接,如果客户端与服务器并不在同一台机子上就需要通过-h指定ip
 2. 命名管道和共享内存(win用户)
    1. 命名管道
       1. server端 + --enable-name-pipe 
       2. client端  + -pipe 或 --protocol=pipe
    2. 共享内存
       1. server端 + --shared-memory
       2. 或client端 + --protocol=memory
 3. Unix域套接字文件

## 1.3 服务器处理客户端请求
大致需要经历是三个部分
1. 连接管理
   1. 采用类似与线程池这样方式去管理向客户端服务的线程
   2. 可以限制同时连接到服务器的客户端的数量,就是限制线程
2. 解析与优化(连接之后,对发来的语句进行解析和优化)
   1. 查询缓存
      1. 但是两个查询请求在字符上的任何不同(空格注释大小写)都会导致缓存不命中
      2. 查询缓存在不同客户端之间可以共享
      3. 如果查询请求包含某些系统函数,用户自定义变量或者函数,一些系统表那么这个请求不被缓存
      4. 缓存失效
         1. 该表的结构或者数据被修改那么该表的所有高速缓存被删除
      5. 维护这段缓存也会带来开销从MySQL5.7.20时不推荐查询缓存,并在MySQL 8.0中删除
   2. 语法解析
      1. 如果缓存未命中就要进行语法解析
   3. 查询优化
      1. 语法解析后服务器获得了需要的信息,就可以开始查询做优化
3. 存储引擎
   1. 截止到服务器程序完成了查询优化为止,还没有真正的去访问真实的数据表,
   2. 所有对数据的存储和提取操作都封装到了一个叫存储引擎(表处理器)的模块里
   3. 为了管理方便,把连接管理,查询缓存,语法解析,查询优化这些并不设计真实数据存储的功能划分为MySQL server的功能吧真实的存取数据的功能划分为存储引擎的功能,存储引擎API向上边的MySQLserver层提供同意的调用接口
## 1.4 设置表的存储引擎
1. 创建表的时候指定存储引擎
   1. ENGINE=InnoDB
2. 修改表的存储引擎
   1. AlTER TABLE 表名 ENGINE = ;

# 2. MySQL的调控按钮 --启动选项和系统变量

## 1. 在命令行上使用选项

我们只讨论服务器的启动选项

1. 禁止客户端使用TCP/IP网络连接服务器
   ```shell
   mysqld --skip-networking
   '''
   选项名前加-- 前缀,多个单词之间用_或-分割
2. 设置默认引擎
   如果创建表没有指定引擎的话,会默认Innodb作对默认存储引擎,我们也可改变在默认引擎
   ```shell
   mysqld --default-storage-engine=MyISAM  不能用空格隔开
   ```
3. 短形式的选项
   1. 短形式的选项名只有一个字母 而且前缀是一个-而不是--
   2. 使用短形式指定启动选项的时候,选项名和选项值之间可以没有间隙,或者用空白字符隔开(-p除外
   3. 对大小写有着明确的限制区分,比如说-P是指定port 而 -p是指定密码

## 2. 配置文件中使用选项

在命令行中设置启动选项只对当前启动生效

1. 配置文件的路径
   1. wih下
   2. 类unix
      1. 我的配置文件路径在/etc/mysql/my.inf上
2. 配置文件内容
   1. 形式 
   ```shell
   [组名]
   {具体启动选项}
   ```
   2. 与命令行形式的区别
      1. 配置文件中只能使用长形式的选项
      2. 不允许加 --前缀
      3. 每行只能指定一个选项
      4. =号周围可以有空白字符
      5. # 表示注释
   3. 例子
   ```shell
   [server]
   skip-networking
   default-storage-engine=MyISAM
   ```
3. 配置文件的优先级
   1. 如果在多个配置文件中设置了相同的启动选项,那么以最后一个配置文件中的为准
4. 同一个配置文件中多个祖的优先级
   1. 最后一个出现的祖中的启动选项为准
5. 指定配置文件
   1. 在命令行中使用default-file
   ```shell
   mysqld --default-file=/tmp/myconfig.txt
   ```
   这样指定的话,程序启动的时候,将只在该路径下搜索配置文件,如果文件不存在,就无法访问而使用defaullt-extra-file还可以在自己的固定路径找

## 3. 系统变量
1 .查看系统变量
show  [GLOBAL|SESSION] variables [like 匹配的模式] (默认是SESSIOn)
2. 设置系统变量
   1. 通过启动选项设置
      1. 命令行
      2. 配置文件
   2. 服务器程序运行过程中设置
      1. 系统变量的作用范围
         1. GLOBAL
         2. SESSION
      2. 设置
         1. SET [GLOBAL|SESSION] 系统变量名 = 值
         2. 默认作用范围是session
>> GLOABL变量只能影响到刚连接的客户端,如果某个客户端改变了某个系统变量在`GLOBAL`作用范围的值，并不会影响该系统变量在当前已经连接的客户端作用范围为`SESSION`的值，只会影响后续连入的客户端在作用范围为`SESSION`的值。

注意并不是所有的系统变量都有作用范围

## 4. 启动选项和系统变量的区别
没啥大的区别,就是你理解的那个样子

## 5. 状态变量
用来显示系统状态 比如说 Threads-connexteds

SHOW [GLOBAL|SESSION] STATUES [LIKE 匹配模式]